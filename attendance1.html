<!DOCTYPE html>
<html lang="en">
<head>
  <title>Attendance Form with Address</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<h2>Employee Attendance</h2>

<select id="employeeName">
  <option value="">Select Employee</option>
  <option>Anil</option>
  <option>Anil Beniwal</option>
  <option>Ashok</option>
   <option>Geeta</option>
   <option>Imran</option>
   <option>Pandeyji</option>
   <option>Payal</option>
   <option>Sanjay</option>
   <option>Swapnil</option>
   <option>Swati</option>
</select><br><br>

<select id="checkType">
  <option value="">Select Check Type</option>
  <option>Check-in</option>
  <option>Check-out</option>
</select><br><br>

<button onclick="submitAttendance()">Submit Attendance</button>

<script>
const API_KEY = 'AIzaSyCGZzKjYXB1Egttf07R3VCZotCEPFONXOA'; //Replace with your key
function submitAttendance() {
  const empName = document.getElementById('employeeName').value;
  const checkType = document.getElementById('checkType').value;

  if (!empName || !checkType) {
    alert('Select Employee and Check Type.');
    return;
  }

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(position => {
      const lat = position.coords.latitude;
      const lng = position.coords.longitude;
      fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&key=${API_KEY}`)
        .then(response => response.json())
        .then(data => {
          const address = data.results[0].formatted_address;
          const formURL = 'https://docs.google.com/forms/d/1q1tD3cfvpIJM8f_rBiX2C6G2UU-JLlbPZ-vTwSOPuSI/edit'; //Replace with your form URL
          const params = new URLSearchParams({
            'entry.6835351': empName,
            'entry.2137196455': checkType,
            'entry.224433312': address,
            'entry.1845950175': `${lat},${lng}`,
          });
          window.open(`${formURL}?${params.toString()}`, '_blank');
        })
        .catch(error => alert('Geocoding error:', error));
    }, () => alert('Geolocation permission denied.'));
  } else {
    alert('Geolocation is not supported by your browser.');
  }
}
</script>

</body>
</html>
